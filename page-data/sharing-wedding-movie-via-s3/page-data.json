{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/sharing-wedding-movie-via-s3/",
    "result": {"data":{"site":{"siteMetadata":{"title":"joe-yamaの備忘録ブログ"}},"markdownRemark":{"id":"53dee3c9-4bf2-51da-b2b4-5e70b65eb9ea","excerpt":"10GB超の動画をどのように共有するか 友人の結婚式で動画を撮りまくっていたら、合計10GBを超えてしまっていた。（最近カメラを買ったので、、、）\nGoogleフォトに保存して共有すればいいや、と楽観視していましたが問題発生。 Googleフォトに無料で保存できるのは1アカウント15GB…","html":"<h2 id=\"10gb超の動画をどのように共有するか\" style=\"position:relative;\"><a href=\"#10gb%E8%B6%85%E3%81%AE%E5%8B%95%E7%94%BB%E3%82%92%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B%E3%81%8B\" aria-label=\"10gb超の動画をどのように共有するか permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10GB超の動画をどのように共有するか</h2>\n<p>友人の結婚式で動画を撮りまくっていたら、合計10GBを超えてしまっていた。（最近カメラを買ったので、、、）\nGoogleフォトに保存して共有すればいいや、と楽観視していましたが問題発生。</p>\n<p><a href=\"https://support.google.com/photos/answer/6220791?hl=ja\">Googleフォトに無料で保存できるのは1アカウント15GBまで</a>というのを忘れていました。\nすでに使用している容量と合計すると15GBを超えてしますので、Googleフォトに頼るのは難しそうです。</p>\n<h2 id=\"s3が動画の保存先共有の解決策に\" style=\"position:relative;\"><a href=\"#s3%E3%81%8C%E5%8B%95%E7%94%BB%E3%81%AE%E4%BF%9D%E5%AD%98%E5%85%88%E5%85%B1%E6%9C%89%E3%81%AE%E8%A7%A3%E6%B1%BA%E7%AD%96%E3%81%AB\" aria-label=\"s3が動画の保存先共有の解決策に permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>S3が動画の保存先＆共有の解決策に</h2>\n<p>GoogleOneで追加容量を購入する手やDropBoxなど他のファイル共有サービスを利用する手も考えましたが、コストパフォーマンスが良くないので却下しました。\n大容量の動画をバンバン保存するために使うのは贅沢すぎます。</p>\n<p>ストレージとして考えたらS3のほうが幾分か安そうです。ついでにストレージクラスを下げておけば、さらに安くなりますよね。あれ？これからは撮った動画をS3にどんどん打ち込んでおけばよいのではという発想に至りました。</p>\n<p>記事の主題からは外れますが、撮った動画をどこに保存していくか、ということも最近の悩みのタネでした。\n思い出が消えてしまうのは悲しいので何枚かハードディスクを買ってRAIDを組もうと思っていましたが、S3がこの悩みの解決策にもなりそうです。</p>\n<h2 id=\"署名付きurlで安全に共有\" style=\"position:relative;\"><a href=\"#%E7%BD%B2%E5%90%8D%E4%BB%98%E3%81%8Durl%E3%81%A7%E5%AE%89%E5%85%A8%E3%81%AB%E5%85%B1%E6%9C%89\" aria-label=\"署名付きurlで安全に共有 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>署名付きURLで安全に共有</h2>\n<p>もちろん友人の結婚式の動画ですからパブリックに公開なんてしたくありません。そこで<a href=\"https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html\">S3の署名付きURL</a>を利用します。</p>\n<p>適当にバケットを作成して、動画をアップロードします。</p>\n<p>面倒なのですが、その性質上オブジェクトごとに署名付きURLを発行する必要があるので、指定のPrefixにあるオブジェクトすべての事前署名付きURLを発行し、テキストに保存します。</p>\n\n        <div class=\"gatsby-code-title\">\n          <span>bash</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">aws s3 <span class=\"token function\">ls</span> --recursive s3://my-s3-bucket/2022-04-23-結婚式/ <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print $NF}'</span> <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> -I <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> aws s3 presign s3://my-s3-bucket/<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> --expires-in <span class=\"token number\">604800</span> <span class=\"token operator\">></span> presign-urls.txt</code></pre></div>\n<p>あとは<code class=\"language-text\">presign-urls.txt</code>を友人に共有すればOKです。</p>\n<p><code class=\"language-text\">--expires-in</code>で署名が執行するまでの時間（秒単位）を指定することができます。最大は604800（1週間）のようです。</p>","frontmatter":{"title":"友人の結婚式の動画をS3経由で共有する","date":"April 27, 2022","description":"プライベートでの大容量ファイルの共有はこれでよさそう"}},"previous":{"fields":{"slug":"/remap-handmade-keyboard/"},"frontmatter":{"title":"自作キーボードのキーマップを変更する"}},"next":null},"pageContext":{"id":"53dee3c9-4bf2-51da-b2b4-5e70b65eb9ea","previousPostId":"f792b167-8930-5df7-9622-25935eda252e","nextPostId":null}},
    "staticQueryHashes": ["2841359383","3257411868"]}